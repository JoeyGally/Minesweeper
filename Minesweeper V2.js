var mines = {
  rc0101: null,
  rc0102: null,
  rc0103: null,
  rc0104: null,
  rc0105: null,
  rc0106: null,
  rc0107: null,
  rc0108: null,
  rc0109: null,
  rc0110: null,
  rc0111: null,
  rc0112: null,
  rc0113: null,
  rc0114: null,
  rc0115: null,

  rc0201: null,
  rc0202: null,
  rc0203: null,
  rc0204: null,
  rc0205: null,
  rc0206: null,
  rc0207: null,
  rc0208: null,
  rc0209: null,
  rc0210: null,
  rc0211: null,
  rc0212: null,
  rc0213: null,
  rc0214: null,
  rc0215: null,

  rc0301: null,
  rc0302: null,
  rc0303: null,
  rc0304: null,
  rc0305: null,
  rc0306: null,
  rc0307: null,
  rc0308: null,
  rc0309: null,
  rc0310: null,
  rc0311: null,
  rc0312: null,
  rc0313: null,
  rc0314: null,
  rc0315: null,

  rc0401: null,
  rc0402: null,
  rc0403: null,
  rc0404: null,
  rc0405: null,
  rc0406: null,
  rc0407: null,
  rc0408: null,
  rc0409: null,
  rc0410: null,
  rc0411: null,
  rc0412: null,
  rc0413: null,
  rc0414: null,
  rc0415: null,

  rc0501: null,
  rc0502: null,
  rc0503: null,
  rc0504: null,
  rc0505: null,
  rc0506: null,
  rc0507: null,
  rc0508: null,
  rc0509: null,
  rc0510: null,
  rc0511: null,
  rc0512: null,
  rc0513: null,
  rc0514: null,
  rc0515: null,

  rc0601: null,
  rc0602: null,
  rc0603: null,
  rc0604: null,
  rc0605: null,
  rc0606: null,
  rc0607: null,
  rc0608: null,
  rc0609: null,
  rc0610: null,
  rc0611: null,
  rc0612: null,
  rc0613: null,
  rc0614: null,
  rc0615: null,

  rc0701: null,
  rc0702: null,
  rc0703: null,
  rc0704: null,
  rc0705: null,
  rc0706: null,
  rc0707: null,
  rc0708: null,
  rc0709: null,
  rc0710: null,
  rc0711: null,
  rc0712: null,
  rc0713: null,
  rc0714: null,
  rc0715: null,

  rc0801: null,
  rc0802: null,
  rc0803: null,
  rc0804: null,
  rc0805: null,
  rc0806: null,
  rc0807: null,
  rc0808: null,
  rc0809: null,
  rc0810: null,
  rc0811: null,
  rc0812: null,
  rc0813: null,
  rc0814: null,
  rc0815: null,

  rc0901: null,
  rc0902: null,
  rc0903: null,
  rc0904: null,
  rc0905: null,
  rc0906: null,
  rc0907: null,
  rc0908: null,
  rc0909: null,
  rc0910: null,
  rc0911: null,
  rc0912: null,
  rc0913: null,
  rc0914: null,
  rc0915: null,

  rc1001: null,
  rc1002: null,
  rc1003: null,
  rc1004: null,
  rc1005: null,
  rc1006: null,
  rc1007: null,
  rc1008: null,
  rc1009: null,
  rc1010: null,
  rc1011: null,
  rc1012: null,
  rc1013: null,
  rc1014: null,
  rc1015: null,

  rc1101: null,
  rc1102: null,
  rc1103: null,
  rc1104: null,
  rc1105: null,
  rc1106: null,
  rc1107: null,
  rc1108: null,
  rc1109: null,
  rc1110: null,
  rc1111: null,
  rc1112: null,
  rc1113: null,
  rc1114: null,
  rc1115: null,

  rc1201: null,
  rc1202: null,
  rc1203: null,
  rc1204: null,
  rc1205: null,
  rc1206: null,
  rc1207: null,
  rc1208: null,
  rc1209: null,
  rc1210: null,
  rc1211: null,
  rc1212: null,
  rc1213: null,
  rc1214: null,
  rc1215: null,

  rc1301: null,
  rc1302: null,
  rc1303: null,
  rc1304: null,
  rc1305: null,
  rc1306: null,
  rc1307: null,
  rc1308: null,
  rc1309: null,
  rc1310: null,
  rc1311: null,
  rc1312: null,
  rc1313: null,
  rc1314: null,
  rc1315: null,

  rc1401: null,
  rc1402: null,
  rc1403: null,
  rc1404: null,
  rc1405: null,
  rc1406: null,
  rc1407: null,
  rc1408: null,
  rc1409: null,
  rc1410: null,
  rc1411: null,
  rc1412: null,
  rc1413: null,
  rc1414: null,
  rc1415: null,

  rc1501: null,
  rc1502: null,
  rc1503: null,
  rc1504: null,
  rc1505: null,
  rc1506: null,
  rc1507: null,
  rc1508: null,
  rc1509: null,
  rc1510: null,
  rc1511: null,
  rc1512: null,
  rc1513: null,
  rc1514: null,
  rc1515: null
}
var count = {
  rc0101: null,
  rc0102: null,
  rc0103: null,
  rc0104: null,
  rc0105: null,
  rc0106: null,
  rc0107: null,
  rc0108: null,
  rc0109: null,
  rc0110: null,
  rc0111: null,
  rc0112: null,
  rc0113: null,
  rc0114: null,
  rc0115: null,

  rc0201: null,
  rc0202: null,
  rc0203: null,
  rc0204: null,
  rc0205: null,
  rc0206: null,
  rc0207: null,
  rc0208: null,
  rc0209: null,
  rc0210: null,
  rc0211: null,
  rc0212: null,
  rc0213: null,
  rc0214: null,
  rc0215: null,

  rc0301: null,
  rc0302: null,
  rc0303: null,
  rc0304: null,
  rc0305: null,
  rc0306: null,
  rc0307: null,
  rc0308: null,
  rc0309: null,
  rc0310: null,
  rc0311: null,
  rc0312: null,
  rc0313: null,
  rc0314: null,
  rc0315: null,

  rc0401: null,
  rc0402: null,
  rc0403: null,
  rc0404: null,
  rc0405: null,
  rc0406: null,
  rc0407: null,
  rc0408: null,
  rc0409: null,
  rc0410: null,
  rc0411: null,
  rc0412: null,
  rc0413: null,
  rc0414: null,
  rc0415: null,

  rc0501: null,
  rc0502: null,
  rc0503: null,
  rc0504: null,
  rc0505: null,
  rc0506: null,
  rc0507: null,
  rc0508: null,
  rc0509: null,
  rc0510: null,
  rc0511: null,
  rc0512: null,
  rc0513: null,
  rc0514: null,
  rc0515: null,

  rc0601: null,
  rc0602: null,
  rc0603: null,
  rc0604: null,
  rc0605: null,
  rc0606: null,
  rc0607: null,
  rc0608: null,
  rc0609: null,
  rc0610: null,
  rc0611: null,
  rc0612: null,
  rc0613: null,
  rc0614: null,
  rc0615: null,

  rc0701: null,
  rc0702: null,
  rc0703: null,
  rc0704: null,
  rc0705: null,
  rc0706: null,
  rc0707: null,
  rc0708: null,
  rc0709: null,
  rc0710: null,
  rc0711: null,
  rc0712: null,
  rc0713: null,
  rc0714: null,
  rc0715: null,

  rc0801: null,
  rc0802: null,
  rc0803: null,
  rc0804: null,
  rc0805: null,
  rc0806: null,
  rc0807: null,
  rc0808: null,
  rc0809: null,
  rc0810: null,
  rc0811: null,
  rc0812: null,
  rc0813: null,
  rc0814: null,
  rc0815: null,

  rc0901: null,
  rc0902: null,
  rc0903: null,
  rc0904: null,
  rc0905: null,
  rc0906: null,
  rc0907: null,
  rc0908: null,
  rc0909: null,
  rc0910: null,
  rc0911: null,
  rc0912: null,
  rc0913: null,
  rc0914: null,
  rc0915: null,

  rc1001: null,
  rc1002: null,
  rc1003: null,
  rc1004: null,
  rc1005: null,
  rc1006: null,
  rc1007: null,
  rc1008: null,
  rc1009: null,
  rc1010: null,
  rc1011: null,
  rc1012: null,
  rc1013: null,
  rc1014: null,
  rc1015: null,

  rc1101: null,
  rc1102: null,
  rc1103: null,
  rc1104: null,
  rc1105: null,
  rc1106: null,
  rc1107: null,
  rc1108: null,
  rc1109: null,
  rc1110: null,
  rc1111: null,
  rc1112: null,
  rc1113: null,
  rc1114: null,
  rc1115: null,

  rc1201: null,
  rc1202: null,
  rc1203: null,
  rc1204: null,
  rc1205: null,
  rc1206: null,
  rc1207: null,
  rc1208: null,
  rc1209: null,
  rc1210: null,
  rc1211: null,
  rc1212: null,
  rc1213: null,
  rc1214: null,
  rc1215: null,

  rc1301: null,
  rc1302: null,
  rc1303: null,
  rc1304: null,
  rc1305: null,
  rc1306: null,
  rc1307: null,
  rc1308: null,
  rc1309: null,
  rc1310: null,
  rc1311: null,
  rc1312: null,
  rc1313: null,
  rc1314: null,
  rc1315: null,

  rc1401: null,
  rc1402: null,
  rc1403: null,
  rc1404: null,
  rc1405: null,
  rc1406: null,
  rc1407: null,
  rc1408: null,
  rc1409: null,
  rc1410: null,
  rc1411: null,
  rc1412: null,
  rc1413: null,
  rc1414: null,
  rc1415: null,

  rc1501: null,
  rc1502: null,
  rc1503: null,
  rc1504: null,
  rc1505: null,
  rc1506: null,
  rc1507: null,
  rc1508: null,
  rc1509: null,
  rc1510: null,
  rc1511: null,
  rc1512: null,
  rc1513: null,
  rc1514: null,
  rc1515: null
}
var searched = {
  rc0101: false,
  rc0102: false,
  rc0103: false,
  rc0104: false,
  rc0105: false,
  rc0106: false,
  rc0107: false,
  rc0108: false,
  rc0109: false,
  rc0110: false,
  rc0111: false,
  rc0112: false,
  rc0113: false,
  rc0114: false,
  rc0115: false,

  rc0201: false,
  rc0202: false,
  rc0203: false,
  rc0204: false,
  rc0205: false,
  rc0206: false,
  rc0207: false,
  rc0208: false,
  rc0209: false,
  rc0210: false,
  rc0211: false,
  rc0212: false,
  rc0213: false,
  rc0214: false,
  rc0215: false,

  rc0301: false,
  rc0302: false,
  rc0303: false,
  rc0304: false,
  rc0305: false,
  rc0306: false,
  rc0307: false,
  rc0308: false,
  rc0309: false,
  rc0310: false,
  rc0311: false,
  rc0312: false,
  rc0313: false,
  rc0314: false,
  rc0315: false,

  rc0401: false,
  rc0402: false,
  rc0403: false,
  rc0404: false,
  rc0405: false,
  rc0406: false,
  rc0407: false,
  rc0408: false,
  rc0409: false,
  rc0410: false,
  rc0411: false,
  rc0412: false,
  rc0413: false,
  rc0414: false,
  rc0415: false,

  rc0501: false,
  rc0502: false,
  rc0503: false,
  rc0504: false,
  rc0505: false,
  rc0506: false,
  rc0507: false,
  rc0508: false,
  rc0509: false,
  rc0510: false,
  rc0511: false,
  rc0512: false,
  rc0513: false,
  rc0514: false,
  rc0515: false,

  rc0601: false,
  rc0602: false,
  rc0603: false,
  rc0604: false,
  rc0605: false,
  rc0606: false,
  rc0607: false,
  rc0608: false,
  rc0609: false,
  rc0610: false,
  rc0611: false,
  rc0612: false,
  rc0613: false,
  rc0614: false,
  rc0615: false,

  rc0701: false,
  rc0702: false,
  rc0703: false,
  rc0704: false,
  rc0705: false,
  rc0706: false,
  rc0707: false,
  rc0708: false,
  rc0709: false,
  rc0710: false,
  rc0711: false,
  rc0712: false,
  rc0713: false,
  rc0714: false,
  rc0715: false,

  rc0801: false,
  rc0802: false,
  rc0803: false,
  rc0804: false,
  rc0805: false,
  rc0806: false,
  rc0807: false,
  rc0808: false,
  rc0809: false,
  rc0810: false,
  rc0811: false,
  rc0812: false,
  rc0813: false,
  rc0814: false,
  rc0815: false,

  rc0901: false,
  rc0902: false,
  rc0903: false,
  rc0904: false,
  rc0905: false,
  rc0906: false,
  rc0907: false,
  rc0908: false,
  rc0909: false,
  rc0910: false,
  rc0911: false,
  rc0912: false,
  rc0913: false,
  rc0914: false,
  rc0915: false,

  rc1001: false,
  rc1002: false,
  rc1003: false,
  rc1004: false,
  rc1005: false,
  rc1006: false,
  rc1007: false,
  rc1008: false,
  rc1009: false,
  rc1010: false,
  rc1011: false,
  rc1012: false,
  rc1013: false,
  rc1014: false,
  rc1015: false,

  rc1101: false,
  rc1102: false,
  rc1103: false,
  rc1104: false,
  rc1105: false,
  rc1106: false,
  rc1107: false,
  rc1108: false,
  rc1109: false,
  rc1110: false,
  rc1111: false,
  rc1112: false,
  rc1113: false,
  rc1114: false,
  rc1115: false,

  rc1201: false,
  rc1202: false,
  rc1203: false,
  rc1204: false,
  rc1205: false,
  rc1206: false,
  rc1207: false,
  rc1208: false,
  rc1209: false,
  rc1210: false,
  rc1211: false,
  rc1212: false,
  rc1213: false,
  rc1214: false,
  rc1215: false,

  rc1301: false,
  rc1302: false,
  rc1303: false,
  rc1304: false,
  rc1305: false,
  rc1306: false,
  rc1307: false,
  rc1308: false,
  rc1309: false,
  rc1310: false,
  rc1311: false,
  rc1312: false,
  rc1313: false,
  rc1314: false,
  rc1315: false,

  rc1401: false,
  rc1402: false,
  rc1403: false,
  rc1404: false,
  rc1405: false,
  rc1406: false,
  rc1407: false,
  rc1408: false,
  rc1409: false,
  rc1410: false,
  rc1411: false,
  rc1412: false,
  rc1413: false,
  rc1414: false,
  rc1415: false,

  rc1501: false,
  rc1502: false,
  rc1503: false,
  rc1504: false,
  rc1505: false,
  rc1506: false,
  rc1507: false,
  rc1508: false,
  rc1509: false,
  rc1510: false,
  rc1511: false,
  rc1512: false,
  rc1513: false,
  rc1514: false,
  rc1515: false
}

function startNewGame() {
  numMines = prompt("How many mines do you want?");
  if(numMines == null) {
    return;
  }
  else if(numMines > 200) {
    alert("That's too many mines!");
  }
  else if(numMines < 10) {
    alert("That's too few mines!");
  }
  else if(10 <= numMines && numMines <= 200) {
    clearBoard();
    placeMines(numMines);
    loadCount();
  }
  else {
    alert("Please only enter numbers!");
  }
  displayMineCountOnBoard();
}
function placeMines(m) {
  for(i=0; i<m; i++) {
    placeMine();
  }
  for(i=1; i<=15; i++) {
    for(j=1; j<=15; j++) {
      rc = toRC(i, j);
      if(mines[rc] == null) {
        mines[rc] = false;
      }
    }
  }
}
function placeMine() {
  r = Math.floor(Math.random() * 15 + 1);
  c = Math.floor(Math.random() * 15 + 1);
  rc = toRC(r, c);
  if(mines[rc] == true) {
    placeMine();
  }
  else if(mines[rc] == false || mines[rc] == null) {
    mines[rc] = true;
    return;
  }
}
function loadCount() {
  for(i=1; i<=15; i++) {
    for(j=1; j<=15; j++) {
      rc = toRC(i, j);
      m = 0;
      toSearch = [
        toRC(i+1, j+1),
        toRC(i+1, j),
        toRC(i+1, j-1),
        toRC(i, j+1),
        toRC(i, j-1),
        toRC(i-1, j+1),
        toRC(i-1, j),
        toRC(i-1, j-1)
      ]
      for(k=0; k<8; k++) {
        if(mines[toSearch[k]] == true) {
          m++;
        }
      }
      count[rc] = m;
      if(mines[rc] == true) {
        count[rc] = 0;
      }
    }
  }
}
function clearBoard() {
  for(i=1; i<=15; i++) {
    for(j=1; j<=15; j++) {
      rc = toRC(i, j);
      mines[rc] = null;
      count[rc] = null;
    }
  }
}

function toRC(r, c) {
  newR = ("0" + String(r)).slice(-2);
  newC = ("0" + String(c)).slice(-2);
  return "rc" + newR + newC;
}

function displayMineCountOnBoard() {
  for(i=1; i<=15; i++) {
    for(j=1; j<=15; j++) {
      rc = toRC(i, j);
      if(mines[rc]) {
        $("#" + rc + " p").html("X").css("color", "black");
        $("#" + rc).css("background-color", "red");
      }
      else if(count[rc] == 0) {
        $("#" + rc + " p").html("&nbsp;").css("color", "black");
        $("#" + rc).css("background-color", "#dddddd");
      }
      else {
        c = count[rc];
        var color;
        switch(count[rc]) {
          case 1:
            color = "blue";
            break;
          case 2:
            color = "green";
            break;
          case 3:
            color = "red";
            break;
          case 4:
            color = "#0000ff";
            break;
          case 5:
            color = "#993300";
            break;
          case 6:
            color = "#6600ff";
            break;
          case 7:
            color = "#cc33ff";
            break;
          case 8:
            color = "#003300";
            break;
        }
        $("#" + rc + " p").html(String(c)).css("color", color);
        $("#" + rc).css("background-color", "#dddddd");
      }
    }
  }
}

$("#new").click(function() {
  startNewGame();
});
